site: yahoo
start_url: https://login.yahoo.com/
login_flow:
  - selector: "#login-username"
    action: fill
    field_type: text
    note: "Yahoo ID or email field"
  - action: sleep
    seconds: 0.4
    note: "Allow username validation to enable Next button"
  - selector: "button#login-signin"
    action: click_optional
    timeout_ms: 8000
    note: "Continue after username (optional fallback)"
  - selector: "button[type='submit'], input[type='submit']"
    action: click_optional
    timeout_ms: 8000
    note: "Continue after username (generic submit fallback)"
  - selector: "#login-signin"
    action: click
    note: "Continue after username"
  - selector: "button:has-text('Use password instead'), button:has-text('Use your password')"
    action: click_optional
    timeout_ms: 6000
    note: "Bypass passkey flow if offered"
  - selector: "button#skip-button"
    action: click_optional
    timeout_ms: 5000
    note: "Skip passkey/QR challenge if shown"
  - selector: "#login-passwd"
    action: wait_for
    timeout_ms: 15000
    note: "Wait for password field after skipping challenges"
  - selector: "#login-passwd"
    action: fill
    field_type: password
    note: "Password field"
  - selector: "#login-signin"
    action: click
    note: "Submit password"
  - selector: "input[name='verificationCode'], input#verification-code"
    action: pause_if_visible
    timeout_ms: 20000
    note: "If 2FA code is required, complete it and press Enter"
  - text: "Enter verification code"
    action: pause_if_visible
    timeout_ms: 20000
    note: "If verification code screen appears, complete it and press Enter"
  - text: "Verify your identity"
    action: pause_if_visible
    timeout_ms: 20000
    note: "If verification prompt appears, complete it and press Enter"
known_urls:
  - https://login.yahoo.com/
  - https://mail.yahoo.com/
working_selectors:
  mail_button: "a[data-test-id='header-mail-button']"
  spam_folder: "a[data-test-folder-name='Spam'], a[aria-label='Spam']"
  empty_spam: "button[data-test-id='empty-folder'], button[title='Empty Spam']"
  confirm_empty: "button[data-test-id='primary-button'], button[data-test-id='confirmation-dialog-ok-button']"
known_quirks:
  - "May prompt for CAPTCHA or secondary verification."
  - "Login flow is two-step (username then password)."
notes: |
  The selectors above target the standard Yahoo Mail experience. If your account
  uses a different locale or layout, record a fresh session and update the
  playbook with the observed selectors.
